<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Test Preset Questions</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .result { background: #f5f5f5; padding: 15px; border-radius: 5px; margin: 10px 0; }
        .active { color: green; }
        .inactive { color: red; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>æµ‹è¯• Preset Questions API</h1>
    
    <button onclick="testAPI()">ğŸ”„ æµ‹è¯• API</button>
    <button onclick="clearCache()">ğŸ—‘ï¸ æ¸…é™¤ç¼“å­˜</button>
    
    <h2>ç»“æœ:</h2>
    <div id="result"></div>
    
    <script>
        async function testAPI() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '<p>æ­£åœ¨åŠ è½½...</p>';
            
            try {
                const timestamp = new Date().getTime();
                const response = await fetch(`/api/questions.php?action=preset_questions&t=${timestamp}`);
                const data = await response.json();
                
                if (data.success && data.data) {
                    let html = `<h3>âœ… æˆåŠŸè·å– ${data.data.length} ä¸ªåˆ†ç±»</h3>`;
                    
                    data.data.forEach((item, idx) => {
                        const activeClass = item.is_active ? 'active' : 'inactive';
                        const activeText = item.is_active ? 'âœ“ Active' : 'âœ— Inactive';
                        
                        html += `
                            <div class="result">
                                <h4>${idx + 1}. ${item.category_name_zh} (${item.category})</h4>
                                <p><strong>çŠ¶æ€:</strong> <span class="${activeClass}">${activeText}</span></p>
                                <p><strong>å›¾æ ‡:</strong> ${item.category_icon}</p>
                                <p><strong>æ’åº:</strong> ${item.sort_order}</p>
                                <p><strong>ä¸­æ–‡é—®é¢˜ (${item.questions_zh ? item.questions_zh.length : 0}):</strong></p>
                                <ul>
                                    ${item.questions_zh ? item.questions_zh.map(q => `<li>${q}</li>`).join('') : '<li>æ— </li>'}
                                </ul>
                                <p><strong>è‹±æ–‡é—®é¢˜ (${item.questions_en ? item.questions_en.length : 0}):</strong></p>
                                <ul>
                                    ${item.questions_en ? item.questions_en.map(q => `<li>${q}</li>`).join('') : '<li>æ— </li>'}
                                </ul>
                            </div>
                        `;
                    });
                    
                    resultDiv.innerHTML = html;
                } else {
                    resultDiv.innerHTML = `<p style="color:red;">âŒ å¤±è´¥: ${data.error || 'Unknown error'}</p>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<p style="color:red;">âŒ é”™è¯¯: ${error.message}</p>`;
            }
        }
        
        function clearCache() {
            // æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
            if ('caches' in window) {
                caches.keys().then(names => {
                    names.forEach(name => caches.delete(name));
                });
            }
            
            // æ¸…é™¤ localStorage
            localStorage.clear();
            
            // æ¸…é™¤ sessionStorage
            sessionStorage.clear();
            
            alert('âœ… ç¼“å­˜å·²æ¸…é™¤ï¼è¯·åˆ·æ–°é¡µé¢ã€‚');
        }
        
        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æµ‹è¯•
        window.onload = testAPI;
    </script>
</body>
</html>

